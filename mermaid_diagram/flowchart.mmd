flowchart TD
    A[Start] --> B[Data Preparation]
    B --> B1[MovieLens Dataset Loading]
    B --> B2[IMDb ID Mapping]
    B --> B3[Movie Description Retrieval/Generation]
    
    B3 --> B3_1[Retrieve from IMDb]
    B3 --> B3_2[LLM Fuzzy Matching for Broken IDs]
    B3 --> B3_3[LLM Description Generation if Unavailable]
    
    B1 & B2 & B3 --> C[Traditional Algorithm Processing]
    C --> C1[SVD/SVD++ Training]
    C1 --> C2[Initial Top NÃ—TÃ—10^M Recommendations]
    
    C2 --> D1[User Profile Construction]
    D1 --> D1_1[Favorite Movies Analysis]
    D1 --> D1_2[Rating Preferences Detection]
    D1 --> D1_3[Popularity Preferences Detection]
    D1 --> D1_4[Release Date Range Determination]
    D1 --> D1_5[User Preference Profile Generation]
    
    C2 --> D2[Movie Profile Preparation]
    D2 --> D2_1[Movie Description Formatting]
    D2 --> D2_2[IMDb Rating Integration]
    D2 --> D2_3[Popularity Score Normalization]
    
    D1_5 & D2_3 --> E[Similarity Scoring]
    E --> E1[Few-shot Prompt Construction]
    E1 --> E2[LLM Similarity Evaluation]
    E2 --> E3[Score Extraction via Regex]
    
    E3 --> F[Recommendations Ranking]
    F --> F1[Sort by Similarity Score]
    F1 --> F2[Select Top N Recommendations]
    
    F2 --> G[End]
